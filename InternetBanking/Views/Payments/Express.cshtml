@using InternetBanking.Core.Application.ViewModels.Payments
@model SavePaymentViewModel

<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Pago Expreso</h5>
           
        </div>
        <div class="modal-body">
            <form method="post" action="@Url.Action("Express", "Payments")">

                <!-- Número de Cuenta Destino -->
                <div class="mb-4">
                    <label asp-for="DestinationAccount" class="form-label font-weight-bold">Número de Cuenta Destino</label>
                    <input type="text" asp-for="DestinationAccount" class="form-control form-control-lg" placeholder="Ingrese el número de cuenta destino" required />
                    <span asp-validation-for="DestinationAccount" class="text-danger"></span>
                </div>

                <!-- Monto -->
                <div class="mb-4">
                    <label asp-for="AmountPaid" class="form-label font-weight-bold">Monto</label>
                    <input asp-for="AmountPaid" class="form-control form-control-lg" placeholder="Ingrese el monto" type="number" step="0.01" required />
                    <span asp-validation-for="AmountPaid" class="text-danger"></span>
                </div>

                <!-- Cuenta de Origen -->
                <div class="mb-4">
                    <label asp-for="SourceAccount" class="form-label font-weight-bold">Cuenta de Origen</label>
                    <select asp-for="SourceAccount" class="form-select form-select-lg" required>
                        <option value="" disabled selected>Seleccione una cuenta</option>
                        @foreach (var account in Model.accounts)
                        {
                            <option value="@account.Id">
                                @account.AccountNumber - @account.CurrentBalance.ToString("C", new System.Globalization.CultureInfo("es-DO"))
                            </option>
                        }
                    </select>
                    <span asp-validation-for="SourceAccount" class="text-danger"></span>
                </div>

                <!-- Campos ocultos para cada cuenta en la lista -->
                @{
                    int i = 0;
                }

                @foreach (var account in Model.accounts)
                {
                    <input type="hidden" name="Accounts[@i].Id" value="@account.Id" />
                    <input type="hidden" name="Accounts[@i].AccountNumber" value="@account.AccountNumber" />
                    <input type="hidden" name="Accounts[@i].CurrentBalance" value="@account.CurrentBalance" />
                    <input type="hidden" name="Accounts[@i].UserId" value="@account.UserId" />
                    <input type="hidden" name="Accounts[@i].AccountType" value="@account.AccountType" />
                    <input type="hidden" name="Accounts[@i].InitialAmount" value="@account.InitialAmount" />
                    <input type="hidden" name="Accounts[@i].CreditLimit" value="@account.CreditLimit" />
                    <input type="hidden" name="Accounts[@i].LoanAmount" value="@account.LoanAmount" />
                    i++;
                }


                <div class="modal-footer d-flex justify-content-between">
                    <button type="submit" class="btn btn-primary">Realizar Pago</button>
                </div>
            </form>
        </div>
    </div>
</div>
